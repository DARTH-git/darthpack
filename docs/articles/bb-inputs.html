<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>01 Model inputs • darthpack</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="01 Model inputs">
<meta property="og:description" content="">
<meta property="og:image" content="https://darth-git.github.io/darthpack/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">darthpack</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/darthpack.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/aa-introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/bb-inputs.html">01 Model inputs</a>
    </li>
    <li>
      <a href="../articles/cc-model.html">02 Decision model</a>
    </li>
    <li>
      <a href="../articles/dd-calibration.html">03 Calibration</a>
    </li>
    <li>
      <a href="../articles/ee-validation.html">04 Validation</a>
    </li>
    <li>
      <a href="../articles/ff-analysis.html">05 Analysis</a>
    </li>
    <li>
      <a href="../articles/zz-testing.html">Testing</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/DARTH-git/darthpack">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>01 Model inputs</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/DARTH-git/darthpack/blob/master/vignettes/bb-inputs.Rmd"><code>vignettes/bb-inputs.Rmd</code></a></small>
      <div class="hidden name"><code>bb-inputs.Rmd</code></div>

    </div>

    
    
<div id="inputs" class="section level1">
<h1 class="hasAnchor">
<a href="#inputs" class="anchor"></a><span class="header-section-number">1</span> Define model inputs</h1>
<p>As described in the main manuscript, in this first component we declare all model input variables and set their values. The <code>R</code> script running the analysis of this component is the <em>01_model_inputs.R</em> file in the <code>R</code> directory. To load the parameters, we run</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(darthpack)
l_params_all &lt;-<span class="st"> </span><span class="kw"><a href="../reference/load_all_params.html">load_all_params</a></span>()</code></pre></div>
<p>The input to inform the values is divided in three categories: external, estimated, and calibrated. The majority of the Sick-Sicker model parameters are informed by external data. Only three parameter values need to be estimated using model calibration.</p>
<p>In this component, we start with the general setup of the model, specifying among others the time horizon, name and number of health states, proportion of the cohort in each of the different health states at the start of the simulation and discount rates. The next step is to specify the external parameters. The initial model parameter values and <code>R</code> variable names are presented in Table <a href="#tab:parameters">1.1</a>.</p>
<table class="table">
<caption>
<span id="tab:parameters">Table 1.1: </span> Description of the initial parameters with their <code>R</code> name and value of the Sick-Sicker model.</caption>
<thead><tr class="header">
<th align="left"><strong>Parameter</strong></th>
<th align="center"><strong>R name</strong></th>
<th align="center"><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Time horizon (<span class="math inline">\(n_t\)</span>)</td>
<td align="center"><code>n_t</code></td>
<td align="center">75 years</td>
</tr>
<tr class="even">
<td align="left">Names of health states (<span class="math inline">\(n\)</span>)</td>
<td align="center"><code>v_n</code></td>
<td align="center">H, S1, S2, D</td>
</tr>
<tr class="odd">
<td align="left">Annual discount rate (costs/QALYs)</td>
<td align="center">
<code>d_c</code>/<code>d_e</code>
</td>
<td align="center">3%</td>
</tr>
<tr class="even">
<td align="left">Annual transition probabilities</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">- Disease onset (H to S1)</td>
<td align="center"><code>p_HS1</code></td>
<td align="center">0.15</td>
</tr>
<tr class="even">
<td align="left">- Recovery (S1 to H)</td>
<td align="center"><code>p_S1H</code></td>
<td align="center">0.5</td>
</tr>
<tr class="odd">
<td align="left">- Disease progression (S1 to S2) in the time-homogenous model</td>
<td align="center"><code>p_S1S2</code></td>
<td align="center">0.105</td>
</tr>
<tr class="even">
<td align="left">Annual mortality</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">- All-cause mortality (H to D)</td>
<td align="center"><code>p_HD</code></td>
<td align="center">age-specific</td>
</tr>
<tr class="even">
<td align="left">- Hazard rate ratio of death in S1 vs H</td>
<td align="center"><code>hr_S1</code></td>
<td align="center">3</td>
</tr>
<tr class="odd">
<td align="left">- Hazard rate ratio of death in S2 vs H</td>
<td align="center"><code>hr_S2</code></td>
<td align="center">3</td>
</tr>
<tr class="even">
<td align="left">Annual costs</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">- Healthy individuals</td>
<td align="center"><code>c_H</code></td>
<td align="center">$2,000</td>
</tr>
<tr class="even">
<td align="left">- Sick individuals in S1</td>
<td align="center"><code>c_S1</code></td>
<td align="center">$4,000</td>
</tr>
<tr class="odd">
<td align="left">- Sick individuals in S2</td>
<td align="center"><code>c_S2</code></td>
<td align="center">$15,000</td>
</tr>
<tr class="even">
<td align="left">- Dead individuals</td>
<td align="center"><code>c_D</code></td>
<td align="center">$0</td>
</tr>
<tr class="odd">
<td align="left">- Additional costs of sick individuals treated in S1 or S2</td>
<td align="center"><code>c_Trt</code></td>
<td align="center">$12,000</td>
</tr>
<tr class="even">
<td align="left">Utility weights</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">- Healthy individuals</td>
<td align="center"><code>u_H</code></td>
<td align="center">1.00</td>
</tr>
<tr class="even">
<td align="left">- Sick individuals in S1</td>
<td align="center"><code>u_S1</code></td>
<td align="center">0.75</td>
</tr>
<tr class="odd">
<td align="left">- Sick individuals in S2</td>
<td align="center"><code>u_S2</code></td>
<td align="center">0.50</td>
</tr>
<tr class="even">
<td align="left">- Dead individuals</td>
<td align="center"><code>u_D</code></td>
<td align="center">0.00</td>
</tr>
<tr class="odd">
<td align="left">Intervention effect</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">- Utility for treated individuals in S1</td>
<td align="center"><code>u_Trt</code></td>
<td align="center">0.95</td>
</tr>
</tbody>
</table>
<p>Age-specific background mortality for healthy individuals is represented by the US population in 2015 and obtained from the <a href="https://www.mortality.org">Human Mortality database</a>. This information is stored in a file named <em>all_cause_mortality.rda</em> in the <em>data</em> directory. Based on this .csv file a vector with mortality rates by age is created using the <code>load_mort_data</code> function in the <em>01_model_inputs_functions.R</em> script. This function gives us the flexibility to easily import data from other countries or years.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print.function</a></span>(load_mort_data) <span class="co"># print the function</span>
<span class="co">#&gt; function(file = NULL){</span>
<span class="co">#&gt;   # Load mortality data from file</span>
<span class="co">#&gt;   if(!is.null(file)) {</span>
<span class="co">#&gt;     df_r_mort_by_age &lt;- read.csv(file = file)}</span>
<span class="co">#&gt;   else{</span>
<span class="co">#&gt;     df_r_mort_by_age &lt;- all_cause_mortality</span>
<span class="co">#&gt;   }</span>
<span class="co">#&gt;   # Vector with mortality rates</span>
<span class="co">#&gt;   v_r_mort_by_age  &lt;- as.matrix(dplyr::select(df_r_mort_by_age, .data$Total))</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   return(v_r_mort_by_age)</span>
<span class="co">#&gt; }</span>
<span class="co">#&gt; &lt;bytecode: 0x7fdad8902e88&gt;</span>
<span class="co">#&gt; &lt;environment: namespace:darthpack&gt;</span></code></pre></div>
<p>Another function in the <em>01_model_inputs_functions.R</em> script, is the <code>load_all_parms</code> function. This function, which is actually using the <code>load_mort_data</code> function, loads all parameters for the decision model from multiple sources and creates a list that contains all parameters and their values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print.function</a></span>(load_all_params)  <span class="co"># print the function</span>
<span class="co">#&gt; function(file.init = NULL,</span>
<span class="co">#&gt;                             file.mort = NULL){ # User defined</span>
<span class="co">#&gt;   #### Load initial set of initial parameters from .csv file ####</span>
<span class="co">#&gt;   if(!is.null(file.init)) {</span>
<span class="co">#&gt;     df_params_init &lt;- read.csv(file = file.init)</span>
<span class="co">#&gt;   } else{</span>
<span class="co">#&gt;     df_params_init &lt;- df_params_init</span>
<span class="co">#&gt;   }</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   #### All-cause age-specific mortality from .csv file ####</span>
<span class="co">#&gt;   v_r_mort_by_age &lt;- load_mort_data(file = file.mort)</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   l_params_all &lt;- with(as.list(df_params_init), {</span>
<span class="co">#&gt;     #### General setup ####</span>
<span class="co">#&gt;     v_names_str &lt;- c("No Treatment", "Treatment")  # CEA strategies</span>
<span class="co">#&gt;     n_str       &lt;- length(v_names_str) # Number of strategies</span>
<span class="co">#&gt;     v_age_names &lt;- n_age_init:(n_age_init + n_t - 1) # vector with age names</span>
<span class="co">#&gt;     v_n &lt;- c("H", "S1", "S2", "D")  # vector with the 4 health states of the model:</span>
<span class="co">#&gt;                                     # Healthy (H), Sick (S1), Sicker (S2), Dead (D)</span>
<span class="co">#&gt;     n_states &lt;- length(v_n)         # number of health states </span>
<span class="co">#&gt;     v_s_init &lt;- c(H = 1, S1 = 0, S2 = 0, D = 0) # initial state vector</span>
<span class="co">#&gt;     #### Create list with all parameters ####</span>
<span class="co">#&gt;     l_params_all &lt;- list(</span>
<span class="co">#&gt;       v_names_str = v_names_str,</span>
<span class="co">#&gt;       n_str       = n_str      ,</span>
<span class="co">#&gt;       n_age_init  = n_age_init, </span>
<span class="co">#&gt;       n_t         = n_t       , </span>
<span class="co">#&gt;       v_age_names = v_age_names,</span>
<span class="co">#&gt;       v_n = v_n,</span>
<span class="co">#&gt;       n_states = n_states,</span>
<span class="co">#&gt;       v_s_init = c(H = 1, S1 = 0, S2 = 0, D = 0),</span>
<span class="co">#&gt;       v_r_mort_by_age = v_r_mort_by_age</span>
<span class="co">#&gt;     )</span>
<span class="co">#&gt;     return(l_params_all)</span>
<span class="co">#&gt;   }</span>
<span class="co">#&gt;   )</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   l_params_all &lt;- c(l_params_all, </span>
<span class="co">#&gt;                     df_params_init) # Add initial set of parameters</span>
<span class="co">#&gt; }</span>
<span class="co">#&gt; &lt;bytecode: 0x7fdad88edb70&gt;</span>
<span class="co">#&gt; &lt;environment: namespace:darthpack&gt;</span></code></pre></div>
<p>The <code>load_all_params</code> function is informed by the arguments <code>file.init</code> and <code>file.mort</code>. The <code>file.init</code> argument is a string with the location and name of the file with initial set of parameters. The initial parameter values for our case-study are stored in the <em>df_params_init.rda</em> file located in the <em>data</em> directory. The <code>load_all_params</code> function read this .csv file into the function environment as a dataframe called, <code>df_params_init</code>.</p>
<p>The <code>file.mort</code> argument is a string with the location and name of the file with mortality data. As described before, in our case-study this is the <em>all_cause_mortality.rda</em> file. Within the <code>load_all_parms</code> function, the <code>load_mort_data</code> function is used to create a vector with mortality rates from the .csv data.</p>
<p>After loading all the information, the <code>load_all_params</code> generates a list called,<code>l_params_all</code>, including all parameters for the model including the general setup parameters and the vector of mortality rates. The function also stores the dataframe <code>df_params_init</code> with the initial set of parameters in the list. This is all executed in the in the <em>01_model_inputs.R</em> script by running the code below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l_params_all &lt;-<span class="st"> </span><span class="kw"><a href="../reference/load_all_params.html">load_all_params</a></span>()</code></pre></div>
<p>For the Sick-Sicker model we do not have to estimate parameters, but we do have three parameters that need to be estimated via model calibration. In this stage of the framework, we simply set these parameters to valid “dummy” values that are compatible with the next phase of the analysis, model implementation, but are ultimately just placeholder values until we conduct the calibration phase. This means that these values will be replaced by the best-fitted calibrated values after we performed the calibration in component 3.</p>
<p>Using a function to create a list of base-case parameters to have all model parameters in a single object is very useful, because this object will have to be updated for the calibration and the different sensitivity analyses in components 3 and 5 of the framework, respectively. Below, we guide you through the components of the function.</p>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Fernando Alarid-Escudero, Eline Krijkamp, Petros Pechlivanoglou, Hawre Jalal, Szu-Yu Kao, Alan Yang, Eva Enns.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
